
tasks.register('updateCanaryUrl', Task) {
    doLast {
        if (project.hasProperty("canaryUrl") && project.hasProperty("canaryVersion")) {
            Properties properties = new Properties()
            File propertiesFile = new File('canary.properties')
            propertiesFile.withOutputStream {
                properties.setProperty("url", canaryUrl)
                properties.setProperty("version", canaryVersion)
                properties.store(it, null)
            }
        } else {
            throw new GradleException("canaryUrl or canaryVersion property is missing")
        }
    }
}